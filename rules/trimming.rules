######################################################
### Reprohackathon Project - 2025                  ###
### Author : Camille LE CORRE                      ###
### Description : rule trimming to perform         ###
### trimming                                       ###
######################################################

rule trimming:
    input:
        fastq="output/fastq/{srr}.fastq"
    output:
        trimmed_fastq="output/trimmed/{srr}_trimmed.fq"
    log:
        "logs/trimming/{srr}.log"
    threads: THREADS
    container:
        f"{ZENODO_URL}{SIF_LIST[3]}"
    params:
        outdir="output/trimmed",
        quality=20,
        phred=33,
        minlen=25
    shell:
        """
        echo "Trimming {input.fastq} with cutadapt..."
        
        cutadapt -m {params.minlen} -q {params.quality} -o {output.trimmed_fastq} {input.fastq} 2> {log}
        
        echo "Trimming complete for {wildcards.srr}"
        """
