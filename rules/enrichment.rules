###############################################
# ENRICHMENT RULES
###############################################

ENRICH_DIR = "output/enrichment"
DESEQ_DIR  = "output/deseq2"

###############################################
# RULE: enrichment
###############################################

rule enrichment:
    input:
        resdf = f"{DESEQ_DIR}/res_df.csv",
        gene_ids   = "data/gene_ids.csv",
        pathways   = "data/gene_pathways.csv",
        kegg       = "data/kegg_pathways.rds"

    output:
        gene_ids      = f"{ENRICH_DIR}/gene_ids.csv",
        gene_pathways = f"{ENRICH_DIR}/gene_pathways.csv",
        annot_long    = f"{ENRICH_DIR}/annot_long.csv",
        enrich        = f"{ENRICH_DIR}/df_enrich.csv",
        top25         = f"{ENRICH_DIR}/df_enrich_top25.csv"
    params:
        outdir = ENRICH_DIR
    container:
         f"{ZENODO_URL}{SIF_LIST[4]}"
    shell:
        """
        mkdir -p {params.outdir}
        Rscript scripts/enrichment.R {input.resdf} {params.outdir}
        """
