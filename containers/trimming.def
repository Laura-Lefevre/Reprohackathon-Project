Bootstrap: docker
From: ubuntu:18.04

%labels
    Author YourName
    Version 1.0
    Description "Singularity container for Cutadapt v1.11"

%environment
    export PATH=/usr/local/bin:$PATH

%post
    # 1️⃣ Installer les dépendances système
    apt-get update && apt-get install -y \
        python3 \
        python3-pip \
        python3-venv \
        build-essential \
        zlib1g-dev \
        libbz2-dev \
        liblzma-dev \
        wget \
        curl \
        git \
        && rm -rf /var/lib/apt/lists/*

    # 2️⃣ Mettre à jour pip vers une version compatible Python 3.6
    python3 -m pip install --upgrade pip==9.0.3

    # 3️⃣ Installer Cutadapt v1.11 via pip
    python3 -m pip install cutadapt==1.11

    # 4️⃣ Vérification de l'installation
    cutadapt --version

%runscript
    # Ce qu'on tape à l'exécution du conteneur sera passé à python/cutadapt
    exec "$@"
