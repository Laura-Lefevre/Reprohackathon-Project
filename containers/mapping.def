Bootstrap: docker
From: ubuntu:20.04

%post
    # --- 1. Installation des dépendances ---
    export DEBIAN_FRONTEND=noninteractive
    apt-get update
    apt-get install -y \
        wget \
        samtools \
        unzip \
        ca-certificates
    apt-get clean
    rm -rf /var/lib/apt/lists/*

    # --- 2. Installation manuelle de Bowtie 0.12.7 ---
    cd /opt
    
    # On télécharge l'archive
    wget https://sourceforge.net/projects/bowtie-bio/files/bowtie/0.12.7/bowtie-0.12.7-linux-x86_64.zip
    
    # On DÉZIPPE. Cela va créer le dossier /opt/bowtie-0.12.7
    unzip bowtie-0.12.7-linux-x86_64.zip
    
    # On nettoie le fichier zip
    rm bowtie-0.12.7-linux-x86_64.zip

%environment
    # --- 3. Ajout de Bowtie 0.12.7 au PATH ---
    # Le conteneur trouvera les exécutables dans le dossier créé par unzip
    export PATH="/opt/bowtie-0.12.7:$PATH"

%help
    Conteneur pour le Reprohackathon (mapping).
    Contient: wget, samtools, et Bowtie v0.12.7 (installé manuellement).
